<div class="container">
  <div class="row">
    <div class="col s12">

      <% if (pagination == 2){ %>

      <% page.posts.each(function(post){ %>
      <%- partial('article', {post: post, index: true}) %>
      <% }) %>

      <% } else { %>

      <% var last;
        page.posts.each(function(post, i) { %>
      <% var year = post.date.year(); %>

      <% if (last != year) { %>
      <% if (last != null){ %>
      </ul>
      <% } %>
      <% last = year; %>
      <ul class="archives collection with-header">
        <li class="collection-header">
          <h4>
            <a href="<%- url_for(config.archive_dir + '/' + year) %>" class="archive-year grey-text text-darken-2"><%= year %></a>
          </h4>
        </li>
        <% } %>
        <li class="collection-item">
          <%- partial('archive-post', {post: post, even: i % 2 == 0}) %>
        </li>

        <% }) %>

        <% if (page.posts.length) { %>
      </ul>
      <% } %>
      <% } %>

      <% if (page.total > 1) { %>
      <nav id="page-nav">
        <%- paginator({
          prev_text: '&laquo; Prev',
          next_text: 'Next &raquo;'
        }) %>
      </nav>
      <% } %>



    </div>
  </div>
</div>
